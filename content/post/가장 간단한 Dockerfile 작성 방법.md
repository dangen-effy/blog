---
title: "ê°€ì¥ ê°„ë‹¨í•œ Dockerfile ì‘ì„± ë°©ë²• ğŸ‹"
description: "ë„ì»¤íŒŒì¼ì˜ ëª…ë ¹ì–´ë“¤ì„ ì•Œì•„ë´…ì‹œë‹¤"
tags: ["Docker", "Dockerfile"]
categories: ["Docker", "Dockerfile"]
date: 2020-11-19T21:00:00+09:00
draft: false
---

## ì´ í¬ìŠ¤íŒ…ì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©

- Dockerfile ì‘ì„± ë°©ë²•

- FROM ëª…ë ¹ì–´

- RUN ëª…ë ¹ì–´

- ë„ì»¤ ì´ë¯¸ì§€ ë¹Œë“œ

- ë„ì»¤ ì»¨í…Œì´ë„ˆ ì‹¤í–‰

<img src="/images/docker_basic.png" alt="Docker" width="250">

<br/>

ë„ì»¤ë¥¼ ì´ìš©í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì–¸ì œë‚˜ ë™ì¼í•œ í™˜ê²½ì—ì„œ êµ¬ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì»¨í…Œì´ë„ˆê°€ ì–´ë–¤ í™˜ê²½ ìœ„ì—ì„œ ì‹¤í–‰ë ì§€ ì„ ì–¸í•´ ì£¼ê³  (ì˜ˆ: CentOS, Ubuntu, ...) ê·¸ ìœ„ì— ìš°ë¦¬ê°€ ì‘ì„±í•œ ì†ŒìŠ¤ì½”ë“œ, ì¦‰ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•˜ë©´ ë˜ë‹ˆê¹Œìš”.

# Dockerfile ì–´ë–»ê²Œ ì‘ì„±í• ê¹Œ?

ë„ì»¤íŒŒì¼ì€ ëª…ë ¹ì–´(Instruction)ë“¤ì˜ ì¡°í•©ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ê°€ì¥ í”í•˜ê²Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ë“¤ë¶€í„° ì•Œì•„ë³¼ê¹Œìš”?

### FROM

ìš°ë¦¬ê°€ ë¹Œë“œí•  ë„ì»¤ ì´ë¯¸ì§€ê°€ ì–´ë–¤ ì´ë¯¸ì§€ ìœ„ì—ì„œ ì‹¤í–‰ë ì§€ ì•Œë ¤ì£¼ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤. CentOS ìœ„ì—ì„œ ì‹¤í–‰í•œë‹¤ê³  ê°€ì •í•´ë³¼ê¹Œìš”?

```
# Dockerfile ì…ë‹ˆë‹¤
FROM centos
```

ìœ„ ë‚´ìš©ì„ `Dockerfile` íŒŒì¼ì— ì‘ì„±í•´ë³´ì„¸ìš”. ê·¸ë¦¬ê³  í•´ë‹¹ í´ë”ì— ì ‘ê·¼í•œ ë’¤ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œ í•´ë´…ì‹œë‹¤!

```
âœ  docker build -t kiwi .
Sending build context to Docker daemon  3.072kB
Step 1/1 : FROM centos
 ---> 0d120b6ccaa8
Successfully built 0d120b6ccaa8
Successfully tagged kiwi:latest
```

- `-t` ì˜µì…˜ì€ ì´ë¯¸ì§€ë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•´ì„œ íƒœê·¸ë¥¼ ë¶™ì—¬ì£¼ëŠ” ì˜µì…˜ì…ë‹ˆë‹¤. ì €ëŠ” `kiwi` ë¼ëŠ” íƒœê·¸ë¥¼ ë¶€ì—¬í•´ ì¤„ê²Œìš”.

ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ë©´ ì—¬ëŸ¬ë¶„ì˜ ë¡œì»¬ ë¨¸ì‹ ì˜ ë””ìŠ¤í¬ ì–´ë”˜ê°€ì— ì €ì¥ë©ë‹ˆë‹¤. í•œ ë²ˆ í™•ì¸í•´ë³¼ê¹Œìš”?

```
âœ  docker images
REPOSITORY  TAG     IMAGE           ID  CREATED     SIZE
kiwi        latest  0d120b6ccaa8    3   months ago  215MB # <- kiwi ì´ë¯¸ì§€ê°€ ì¡´ì¬í•©ë‹ˆë‹¤!
```

ì´ì œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰(Run) í•´ë´…ì‹œë‹¤.

**ê°‘ë¶„ì‹¸ ì£¼ì˜**

```
âœ  docker run kiwi
```

ì‹¤í–‰í–ˆëŠ”ë° ì•„ë¬´ëŸ° ì¶œë ¥ë„ ì•ˆ ë‚˜ì˜¤ê³  ì´ê²Œ ë­ í•˜ëŠ” ê±´ê°€ ì‹¶ì£ ? ì´ìœ ëŠ” ê°„ë‹¨í•©ë‹ˆë‹¤. ìš°ë¦¬ê°€ ì‘ì„±í•œ ë„ì»¤íŒŒì¼ì—ì„œ ì•„ë¬´ê²ƒë„ í•˜ì§€ ë§ë¼ê³  í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.  (ìœ„ì—ì„œ ì‘ì„±í•œ `Dockerfile` ì„ ë‹¤ì‹œ í•œë²ˆ ì½ì–´ë³´ì„¸ìš”)


## ì»¨í…Œì´ë„ˆì—ê²Œ ì¼ ì‹œí‚¤ê¸°

ì§€ê¸ˆê¹Œì§€ ë§Œë“  ë„ì»¤ ì´ë¯¸ì§€ëŠ” ì‹¤í–‰ì‹œì¼œë„ ì•„ë¬´ëŸ° ì¼ì„ í•˜ì§€ ì•Šì•„ ì“¸ëª¨ê°€ ì—†ìŠµë‹ˆë‹¤. ìµœì†Œí•œ  `Hello World` ë¼ë„ ì¶œë ¥í•˜ê²Œ ë§Œë“¤ì–´ë´…ì‹œë‹¤.

ê·¸ëŸ°ë° ë¬¸ìì—´ ì¶œë ¥ì€ ì–´ë–»ê²Œ í• ê¹Œìš”? ì‰˜ ëª…ë ¹ì–´ ì¤‘ì—ì„œ `echo` ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. í•œ ë²ˆ í„°ë¯¸ë„ì„ ì—´ì–´ ì§ì ‘ ì‚¬ìš©í•´ë³¼ê¹Œìš”?

```
âœ  echo Hello World
Hello World # <- ì¶œë ¥ì„ ì˜ í•˜ëŠ” ëª¨ìŠµ
```

ë¬¸ìì—´ì„ í„°ë¯¸ë„ì— ì¶œë ¥í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ëƒˆìœ¼ë‹ˆ í•´ë‹¹ ëª…ë ¹ì–´(Instruction)ë¥¼ ë„ì»¤íŒŒì¼ì— ì…ë ¥í•´ë´…ì‹œë‹¤.

### RUN

ìš°ë¦¬ëŠ” ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰(Run) í•  ë•Œ `Hello World` ë¥¼ ì¶œë ¥í•˜ê¸¸ ì›í•©ë‹ˆë‹¤. ì´ë•Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ê°€ `RUN` ì…ë‹ˆë‹¤. ì•„ë˜ì²˜ëŸ¼ ë„ì»¤íŒŒì¼ì„ ìˆ˜ì •í•´ ì£¼ì„¸ìš”.

```
FROM centos

RUN echo Hello World # <- ì—¬ê¹ë‹ˆë‹¤. ë„ì»¤ê°€ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í• ë•Œ ì½ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.
```

ì´ì œ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•´ë³¼ê¹Œìš”?

```
âœ  docker build -t kiwi .
Sending build context to Docker daemon  3.072kB
Step 1/2 : FROM centos
 ---> 0d120b6ccaa8
Step 2/2 : CMD echo Hello World # <- ìš°ë¦¬ê°€ ë°©ê¸ˆ ì¶”ê°€í•œ ëª…ë ¹ì–´(Instruction)
 ---> Running in b088437f0928
Removing intermediate container b088437f0928
 ---> 178a229a97f3
Successfully built 178a229a97f3
Successfully tagged kiwi:latest

âœ  docker run kiwi
Hello World # <- ì˜ ì¶œë ¥í•˜ëŠ” ëª¨ìŠµ
```

### ë§ˆì¹˜ë©°

ì§€ê¸ˆê¹Œì§€ ê°€ì¥ ê°„ë‹¨í•œ ë„ì»¤íŒŒì¼ì„ ì‘ì„±í•´ë´¤ìŠµë‹ˆë‹¤. ë„ì»¤ë¥¼ ì“¸ ë•Œ ë¹Œë“œíƒ€ì„ê³¼ ëŸ°íƒ€ì„ì„ ëª…í™•íˆ ë¶„ë¦¬í•´ì„œ ìƒê°í•˜ë©´ ì‰½ìŠµë‹ˆë‹¤.

ìš°ë¦¬ê°€ `docker build` ëª…ë ¹ì–´ë¥¼ í˜¸ì¶œí•˜ë©´ ì •ì ì¸ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ë©° ì´ë•Œë¥¼ **ë¹Œë“œíƒ€ì„**ì´ë¼ê³  í•©ë‹ˆë‹¤.

ì´ë ‡ê²Œ ì •ì ì¸ ì´ë¯¸ì§€ë¥¼ ë™ì ìœ¼ë¡œ ìƒê¸°ë¥¼ ë¶ˆì–´ë„£ì–´ ì£¼ë ¤ë©´ **ëŸ°íƒ€ì„**ìœ¼ë¡œ ë„˜ì–´ê°€ì•¼ í•©ë‹ˆë‹¤. ì¦‰ `docker run` ì„ í˜¸ì¶œí•˜ë©´ ë˜ê² ì£ .
